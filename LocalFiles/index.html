<!--
* @file index.html
* @author Ali Sarrafi
*
* Template application that provides Native UI functionality from
* HTML5 aand JavaScript.
*
* The entire UI and application logic can be implemented
* in JavaScript.
* Please refer to the Wiki Page for more documentation 
-->

<!DOCTYPE html>

<html>

<head>

<!-- Import MoSync Constants Library. -->
<script src="js/maapi.js"></script>

<!-- Import the bridge library. -->
<script src="js/bridge.js"></script>

<!-- Import Native UI Library. -->
<script src="js/NativeUI.js"></script>

<!-- Import Resource Handler. -->
<script src="js/resourceHandler.js"></script>



<script language="JavaScript">
	/**
	* Handles key press events, 
	* Refer to Mosync documentation for key code details
	*/
	function keyPressEvent(keyCode) {
		//Close the Application if the Back key is pressed
		if(keyCode == MoSyncConstants.MAK_BACK) {
			// Call close to exit the application.
			bridge.messagehandler.send({
				"messageName" : "close"
			}, null);
		}
	}
	
	/**
	* Handles events generated by the button.
	* See the markup for more usage
	* Two Extra parameters are passed to event handlers
	* - WidgetHandle MoSync handle for the widget
	* - eventType type of the event triggered
	*/
	function handleButtonEvent(message) {
		console.log('You Clicked the Button');
	}

	var numclicked = 0;
	
	/**
	* A simple function that updateds a label on screen
	*/
	function changeLabel()
	{
			var myLabel = document.getNativeElementById("myLabel");
			
			myLabel.setProperty(
					"text", 
					"You've clicked the button " + ++numclicked + " times");
	}
	
	/**
	* Event comming from the library indicating the UI is ready to be shown
	* We override the default operation of the library to add some new functionality. 
	*/
	NativeUI.UIReady = function()
	{		
		var mainScreen = document.getNativeElementById("mainScreen");
		mainScreen.show();
		
		var myButton = document.getNativeElementById("myButton");
		myButton.addEventListener("Clicked", changeLabel);
	}
	
	/**
	* Initialize the NativeUI System 
	*/
	function initialize()
	{
		NativeUI.initUI();
	}
</script>

</head>

<body  onload="initialize()">
	<!-- All of the NativeUI widgets should be wraped inside a tag with id="NativeUI" -->
	<div id="NativeUI">
		<!-- the element with id="mainScreen" is loaded to the device screen  by default -->
		<div widgetType="TabScreen" id="mainScreen">
			<div widgetType="Screen" id="firstScreen" title="Web Screen" icon="img/TabIconWebView.png">
				<div widgetType="WebView" id="WebBrowser" width="-1" height="-1" url="http://www.google.com"></div>
			</div>
			<div widgetType="Screen" id="SecondScreen" title="Widget Screen">
				<div widgetType="VerticalLayout" id="mainLayout" width="-1" height="-1">
					<div widgetType="Label" id="myLabel" width="-1" text="Here is a Label" fontSize="14" fontColor="0xEE3B3B"></div>
					<div widgetType="Button" id="myButton" width="-1" text="Click !" onevent="handleButtonEvent()"></div>
				</div>
			</div>
		</div> 
	</div>
</body>
</html>
