<!--
* @file index.html
* @author Ali Sarrafi
*
* Template application that provides Native UI functionality from
* HTML5 aand JavaScript.
*
* The entire UI and application logic can be implemented
* in JavaScript.
* Please refer to the Wiki Page for more documentation 
-->

<!DOCTYPE html>

<html>
<head>

<!-- Import the bridge library. -->
<script src="js/bridge.js"></script>

<!-- Import Native UI Library. -->
<script src="js/NativeUI.js"></script>

<!-- Import MoSync's API Library. -->
<script src="js/maapi.js"></script>

<!-- Import Resource Handler. -->
<script src="js/resourceHandler.js"></script>



<script language="JavaScript">
	/**
	* Handles key press events, 
	* Refer to Mosync documentation for key code details
	*/
	function keyPressEvent(keyCode) {
		//Close the Application if the Back key is pressed
		if(keyCode == MoSyncConstants.MAK_BACK) {
			// Call close to exit the application.
			bridge.messagehandler.send({
				"messageName" : "close"
			}, null);
		}
	}
	
	/**
	* Handles events generated by the button.
	* See the markup for more usage
	* Two Extra parameters are passed to event handlers
	* - WidgetHandle MoSync handle for the widget
	* - eventType type of the event triggered
	*/
	function handleButtonEvent(message) {
		alert('You Clicked the Button');
	}
	
	NativeUI.UIReady = function()
	{
		
		var mainScreen = document.getNativeElemnetById("mainScreen");
		mainScreen.show();
		
		var myButton = document.getNativeElemnetById("myButton");
		myButton.addEventListener("Clicked", function(){
			myButton.setProperty("text", "Already clicked");
		});
	}
	
	function initialize()
	{
		NativeUI.initUI();
	}
</script>

</head>

<body  onload="initialize()">
	<!-- All of the NativeUI widgets should be wraped inside a tag with id="NativeUI" -->
	<div id="NativeUI">
		<!-- the element with id="mainScreen" is loaded to the device screen  by default -->
			<div widgetType="TabScreen" id="mainScreen">
				<div widgetType="Screen" id="webScreen" width="-1" height="-1">
					<div widgetType="Button" id="myButton" width="-1" height="-2" text="Click Me!" onevent="handleButtonEvent()"></div>
				</div>
				<div widgetType="Screen" id="webScreen2" width="-1" height="-1">
					<div widgetType="WebView" id="myWebView2" width="-1" height="-1" url="http://www.google.com"></div>
				</div>
			</div>
	</div>
</body>
</html>
